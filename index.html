<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>METERATOR!</title>
		<link rel="icon" type="image/svg+xml" href="favicon.svg" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap"
			rel="stylesheet"
		/>
		<!--<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&display=swap"
			rel="stylesheet"
		/>-->
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<div id="sidebar">
			<h2>METERATOR!</h2>

			<div class="button-group">
				<button class="primary-btn" onclick="uploadText()">
					Upload plain text (.txt)
				</button>
				<button class="primary-btn" onclick="showPasteModal()">
					Paste in text
				</button>
				<div class="button-row">
					<button
						class="secondary-btn"
						onclick="copyCurrent()"
						id="copy-btn"
						disabled
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="16"
							height="16"
							fill="currentColor"
							viewBox="0 0 16 16"
						>
							<path
								fill-rule="evenodd"
								d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"
							/>
						</svg>
						Copy
					</button>
					<button
						class="secondary-btn"
						onclick="downloadCurrent()"
						id="download-btn"
						disabled
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="16"
							height="16"
							fill="currentColor"
							viewBox="0 0 16 16"
						>
							<path
								d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383"
							/>
							<path
								d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708z"
							/>
						</svg>
						Save
					</button>
				</div>
			</div>

			<div id="current-text-name"></div>

			<h2>Saved Texts</h2>
			<div id="text-list"></div>

			<input
				type="file"
				id="file-input"
				accept=".txt"
				onchange="handleFileUpload(event)"
			/>
		</div>

		<div id="main-content">
			<div id="editor-container">
				<div
					class="meter-selector"
					id="meter-selector"
					style="display: none"
				>
					<label>For simple error-checking, select meter</label>
					<select id="meter-type" onchange="changeMeter()">
						<option value="other">Other (no checking)</option>
						<option value="dactylic">Dactylic</option>
						<option value="iambo-trochaic">Iambo-trochaic</option>
					</select>
				</div>
				<div id="editor"></div>
			</div>

			<button class="help-button" onclick="showHelpModal()">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					width="24"
					height="24"
					fill="currentColor"
					viewBox="0 0 16 16"
				>
					<path
						d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
					/>
					<path
						d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"
					/>
				</svg>
			</button>
		</div>

		<div id="paste-modal" class="modal" onclick="closePasteModal(event)">
			<div class="modal-content" onclick="event.stopPropagation()">
				<button class="modal-close" onclick="closePasteModal()">
					&times;
				</button>
				<h2 style="margin-bottom: 20px; color: #2c3e50">Paste Text</h2>
				<textarea
					id="paste-area"
					placeholder="Paste your text here..."
				></textarea>
				<button
					class="primary-btn"
					onclick="loadFromPaste()"
					style="width: 100%; margin-top: 15px"
				>
					Load Text
				</button>
			</div>
		</div>

		<div id="help-modal" class="modal" onclick="closeHelpModal(event)">
			<div class="modal-content" onclick="event.stopPropagation()">
				<button class="modal-close" onclick="closeHelpModal()">
					&times;
				</button>
				<h2 style="margin-bottom: 20px; color: #2c3e50">
					Instructions
				</h2>
				<div style="line-height: 1.8; text-align: left">
					• Type <strong>-</strong> (hyphen) for long (‒)<br />
					• Type <strong>u</strong> for short (∪)<br />
					• Type <strong>x</strong> for anceps (×)<br />
					• Type <strong>A/a/B/b/C/c/D/d</strong> for labels<br />
					• Press <strong>Tab</strong> or <strong>Space</strong> to
					skip/leave empty<br />
					• Press <strong>Backspace</strong> to go back<br />
					• Press <strong>Delete</strong> to clear current<br />
					• Use <strong>Arrow keys</strong> to navigate<br />
					• Auto-advances to next syllable after marking
				</div>
			</div>
		</div>

		<script src="script.js"></script>
	</body>
</html>
